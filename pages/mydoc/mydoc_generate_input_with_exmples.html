---
title: Automatic generation of exemplified input files for PERTURBO
sidebar: mydoc_sidebar
last_updated: January 11, 2020
permalink: mydoc_generate_input.html
folder: mydoc
toc: false
---

<html>
<head>
<link rel="stylesheet" href="css/my_style.css">
</head>
<body>

   <p>The PERTURBO huicode has many calculation modes (specified by the <a href="mydoc_param_perturbo#calc_mode">calc_mode</a> variable). Each calculation mode implies different mandatory and optional input parameters. In order to simplify and systematize the input files for the user, we provide a python script which can generate the PERTURBO input files for different calculation modes.</p>

<p>To use the script, go to the <em>utils</em> directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ./utils
</code></pre></div></div>

<p>Suppose, we would like to generate the input file for the calculation mode <code class="language-plaintext highlighter-rouge">ephmat</code>. To do this, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./generate_input.py <span class="nt">--calc_mode</span> ephmat
</code></pre></div></div>

<p>For a shorter version, one can specify <code class="language-plaintext highlighter-rouge">-c</code> instead of <code class="language-plaintext highlighter-rouge">--calc_mode</code>.</p>

<p>Then, the input file (called by default <em>pert.in</em>) is generated:</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">! This input file for PERTURBO was generated by generate_input.py script</span><span class="w">

</span><span class="p">&amp;</span><span class="n">perturbo</span><span class="w">
</span><span class="c1">! ***Mandatory parameters***</span><span class="w">
</span><span class="n">calc_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ephmat'</span><span class="w">
</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'prefix'</span><span class="w">
</span><span class="n">fklist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'prefix.kpt'</span><span class="w">
</span><span class="n">fqlist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'prefix.qpt'</span><span class="w">


</span><span class="c1">! ***Optional parameters***</span><span class="w">
</span><span class="c1">! band_min = 1</span><span class="w">
</span><span class="c1">! band_max = 9999999</span><span class="w">
</span><span class="c1">! phfreq_cutoff = 1.0</span><span class="w">
</span><span class="p">/</span><span class="w">
</span></code></pre></div></div>

<p>It contains a block of mandatory parameters for this calculation mode and a block of optional ones, which is commented. As one can see, this input file containes some <em>typical</em> values for the input parameters. The user should modify them for a given calculation.</p>

<p>Setting the variables is also possible using the scipt. For example, to set <code class="language-plaintext highlighter-rouge">prefix</code> to <code class="language-plaintext highlighter-rouge">'si'</code> and <code class="language-plaintext highlighter-rouge">band_min</code> to <code class="language-plaintext highlighter-rouge">'10'</code>, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./generate_input.py <span class="nt">-c</span> ephmat <span class="nt">--prefix</span> si <span class="nt">--band_min</span> 10
</code></pre></div></div>

<p>The values of these parameters were changed in the <em>pert.in</em> file. Note, that since we specified an optional parameter <code class="language-plaintext highlighter-rouge">band_min</code>, it was uncommented in the input file.</p>

<p>To change the name of the input file, run the script with <code class="language-plaintext highlighter-rouge">-i your_name.in</code> option. Setting the input parameter values from the scipt could be usefull in the case, when one needs to create automatically many different input files.</p>

<p>In order to generate the input files for the <code class="language-plaintext highlighter-rouge">qe2pert.x</code> calcuation, select <code class="language-plaintext highlighter-rouge">-c qe2pert</code>. Run the script with <code class="language-plaintext highlighter-rouge">-h</code> to get the whole list of possible options.</p>

<p>To see a <em>typical</em> input file without running the script, select the calculation mode here:

<!-- MERGE the examples.html file HERE -->
<!-- Merge this file with the file mydoc_generate_input.html-->


<select id="CalcModeSelect" onchange="DropDownFunction()">
  <option value="">Select...</option>
  <option value="qe2pert">qe2pert</option>
  <option value="bands">bands</option>
  <option value="phdisp">phdisp</option>
  <option value="ephmat">ephmat</option>
  <option value="setup">setup</option>
  <option value="imsigma">imsigma</option>
  <option value="meanfp">meanfp</option>
  <option value="trans">trans</option>
  <option value="trans-pp">trans-pp</option>
  <option value="dynamics-run">dynamics-run</option>
  <option value="dynamics-pp">dynamics-pp</option>
</select>
</p>
</br></br><style>
.section_qe2pert {
display: none
}

.section_bands {
display: none
}

.section_phdisp {
display: none
}

.section_ephmat {
display: none
}

.section_setup {
display: none
}

.section_imsigma {
display: none
}

.section_meanfp {
display: none
}

.section_trans {
display: none
}

.section_trans-pp {
display: none
}

.section_dynamics-run {
display: none
}

.section_dynamics-pp {
display: none
}

</style>

<div id="modeblock_qe2pert" class="section_qe2pert">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&qe2pert
</br>
! ***Mandatory parameters***
</br>
prefix = 'prefix'
</br>
outdir = './tmp'
</br>
phdir = 'phdir'
</br>
! coarse k grid (used to construct Wannier functions)
</br>
nk1 = 8
</br>
nk2 = 8
</br>
nk3 = 8
</br>
! number of wannier functions
</br>
num_wann = 1
</br>

</br>

</br>
! ***Optional parameters***
</br>
! dft_band_min = 1
</br>
! dft_band_max = 10000
</br>
! system_2d = .false.
</br>
! lwannier = .true.
</br>
! debug = .false.
</br>
! load_ephmat = .false.
</br>
! asr = 'crystal'
</br>
! polar_alpha = 1.0
</br>
! thickness_2d = 6.0
</br>
! eig_corr = 'eig_corr'
</br>
/
</br>
</div>
</div>

<div id="modeblock_bands" class="section_bands">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'bands'
</br>
prefix = 'prefix'
</br>
fklist = 'prefix.kpt'
</br>
/
</br>
</div>
</div>

<div id="modeblock_phdisp" class="section_phdisp">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'phdisp'
</br>
prefix = 'prefix'
</br>
fqlist = 'prefix.qpt'
</br>
/
</br>
</div>
</div>

<div id="modeblock_ephmat" class="section_ephmat">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'ephmat'
</br>
prefix = 'prefix'
</br>
fklist = 'prefix.kpt'
</br>
fqlist = 'prefix.qpt'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
! phfreq_cutoff = 1.0
</br>
/
</br>
</div>
</div>

<div id="modeblock_setup" class="section_setup">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'setup'
</br>
prefix = 'prefix'
</br>
boltz_kdim(1) = 1
</br>
boltz_kdim(2) = 1
</br>
boltz_kdim(3) = 1
</br>
ftemper = 'prefix.temper'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
! boltz_emin = -9999.0
</br>
! boltz_emax = 9999.0
</br>
! hole = .false.
</br>
/
</br>
</div>
</div>

<div id="modeblock_imsigma" class="section_imsigma">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'imsigma'
</br>
prefix = 'prefix'
</br>
ftemper = 'prefix.temper'
</br>
fklist = 'prefix.kpt'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
! delta_smear = 10.0
</br>
! phfreq_cutoff = 1.0
</br>
! polar_split = ''''
</br>
! fqlist = 'prefix.qpt'
</br>
! sampling = 'uniform'
</br>
! cauchy_scale = 1.0
</br>
! nsamples = 100000
</br>
/
</br>
</div>
</div>

<div id="modeblock_meanfp" class="section_meanfp">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'meanfp'
</br>
prefix = 'prefix'
</br>
fklist = 'prefix.kpt'
</br>
ftemper = 'prefix.temper'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
/
</br>
</div>
</div>

<div id="modeblock_trans" class="section_trans">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'trans'
</br>
prefix = 'prefix'
</br>
boltz_kdim(1) = 1
</br>
boltz_kdim(2) = 1
</br>
boltz_kdim(3) = 1
</br>
ftemper = 'prefix.temper'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! boltz_qdim(1) = boltz_kdim(1)
</br>
! boltz_qdim(2) = boltz_kdim(2)
</br>
! boltz_qdim(3) = boltz_kdim(3)
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
! boltz_emin = -9999.0
</br>
! boltz_emax = 9999.0
</br>
! delta_smear = 10.0
</br>
! phfreq_cutoff = 1.0
</br>
! boltz_nstep = 50
</br>
! boltz_de = 1.0
</br>
! trans_thr = 0.002
</br>
! hole = .false.
</br>
! load_scatter_eph = .false.
</br>
! tmp_dir = './tmp'
</br>
/
</br>
</div>
</div>

<div id="modeblock_trans-pp" class="section_trans-pp">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'trans-pp'
</br>
prefix = 'prefix'
</br>
boltz_kdim(1) = 1
</br>
boltz_kdim(2) = 1
</br>
boltz_kdim(3) = 1
</br>
ftemper = 'prefix.temper'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
! boltz_emin = -9999.0
</br>
! boltz_emax = 9999.0
</br>
! boltz_de = 1.0
</br>
! hole = .false.
</br>
/
</br>
</div>
</div>

<div id="modeblock_dynamics-run" class="section_dynamics-run">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'dynamics-run'
</br>
prefix = 'prefix'
</br>
boltz_kdim(1) = 1
</br>
boltz_kdim(2) = 1
</br>
boltz_kdim(3) = 1
</br>
ftemper = 'prefix.temper'
</br>
boltz_nstep = 50
</br>
output_nstep = 1
</br>
time_step = 1.0
</br>
boltz_init_dist = 'restart'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! solver = 'rk4'
</br>
! boltz_init_e0 = 1.0
</br>
! boltz_init_smear = 1.0
</br>
! delta_smear = 10.0
</br>
! phfreq_cutoff = 1.0
</br>
! boltz_nstep = 50
</br>
! boltz_qdim(1) = boltz_kdim(1)
</br>
! boltz_qdim(2) = boltz_kdim(2)
</br>
! boltz_qdim(3) = boltz_kdim(3)
</br>
! hole = .false.
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
/
</br>
</div>
</div>

<div id="modeblock_dynamics-pp" class="section_dynamics-pp">
<div class="my_code_box">
! This input file for PERTURBO was generated by generate_input.py script
</br>

</br>
&perturbo
</br>
! ***Mandatory parameters***
</br>
calc_mode = 'dynamics-pp'
</br>
prefix = 'prefix'
</br>
boltz_kdim(1) = 1
</br>
boltz_kdim(2) = 1
</br>
boltz_kdim(3) = 1
</br>
ftemper = 'prefix.temper'
</br>

</br>

</br>
! ***Optional parameters***
</br>
! hole = .false.
</br>
! boltz_de = 1.0
</br>
! band_min = 1
</br>
! band_max = 9999999
</br>
! boltz_emin = -9999.0
</br>
! boltz_emax = 9999.0
</br>
/
</br>
</div>
</div>

</body>
</html>
