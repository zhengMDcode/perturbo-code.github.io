---
title: Automatic generation of exemplified input files for PERTURBO
sidebar: mydoc_sidebar
last_updated: January 11, 2020
permalink: mydoc_generate_input.html
folder: mydoc
toc: false
---

<html>
<head>
<link rel="stylesheet" href="css/my_style.css">
<script>
$(function(){
  $("#includedContent").load("pages/mydoc/input_examples.html");
});
</script>
</head>
<body>

   <p>The PERTURBO code has many calculation modes (specified by the <a href="mydoc_param_perturbo#calc_mode">calc_mode</a> variable). Each calculation mode implies different mandatory and optional input parameters. In order to simplify and systematize the input files for the user, we provide the <code>generate_input.py</code> python script which generates the PERTURBO input files for different calculation modes.</p>

<p>To use the script, go to the <em>utils</em> directory of the PERTURBO code folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> [perturbo_path]/utils
</code></pre></div></div>

<p>Suppose, we would like to generate the input file for the calculation mode <code class="language-plaintext highlighter-rouge">ephmat</code>. To do this, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./generate_input.py <span class="nt">--calc_mode</span> ephmat
</code></pre></div></div>

<p>For a shorter version, one can specify <code class="language-plaintext highlighter-rouge">-c</code> instead of <code class="language-plaintext highlighter-rouge">--calc_mode</code>.</p>

<p>Then, the input file (called by default <em>pert.in</em>) is generated:</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">! This input file for PERTURBO was generated by generate_input.py script</span><span class="w">

</span><span class="p">&amp;</span><span class="n">perturbo</span><span class="w">
</span><span class="c1">! ***Mandatory parameters***</span><span class="w">
</span><span class="n">calc_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ephmat'</span><span class="w">
</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'prefix'</span><span class="w">
</span><span class="n">fklist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'prefix.kpt'</span><span class="w">
</span><span class="n">fqlist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'prefix.qpt'</span><span class="w">


</span><span class="c1">! ***Optional parameters***</span><span class="w">
</span><span class="c1">! band_min = 1</span><span class="w">
</span><span class="c1">! band_max = 9999999</span><span class="w">
</span><span class="c1">! phfreq_cutoff = 1.0</span><span class="w">
</span><span class="p">/</span><span class="w">
</span></code></pre></div></div>

<p>It contains a block of mandatory parameters for this calculation mode and a block of optional ones, which is commented. As one can see, this input file containes some <em>typical</em> values for the input parameters. The user should modify them for a given calculation.</p>

<p>Setting the variables is also possible with the script. For example, to set <code class="language-plaintext highlighter-rouge">prefix</code> to <code class="language-plaintext highlighter-rouge">'si'</code> and <code class="language-plaintext highlighter-rouge">band_min</code> to <code class="language-plaintext highlighter-rouge">'10'</code>, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./generate_input.py <span class="nt">-c</span> ephmat <span class="nt">--prefix</span> si <span class="nt">--band_min</span> 10
</code></pre></div></div>

<p>The values of these parameters were changed in the <em>pert.in</em> file. Note, that since we specified an optional parameter <code class="language-plaintext highlighter-rouge">band_min</code>, it was uncommented in the input file.</p>

<p>To change the name of the input file, run the script with <code class="language-plaintext highlighter-rouge">-i input_name.in</code> option. Setting the input parameter values from the script could be usefull in the case, when one needs to create automatically many different input files.</p>

<p>In order to generate the input files for the <code class="language-plaintext highlighter-rouge">qe2pert.x</code> calcuation, select <code class="language-plaintext highlighter-rouge">-c qe2pert</code>. Run the script with <code class="language-plaintext highlighter-rouge">-h</code> to get the whole list of possible options.</p>

<div id="includedContent"></div>
<!--
<hr>
<a name="select_button"></a>
<p>To see a <em>typical</em> input file without running the script, select the calculation type here:-->

<!-- MERGE the examples.html file HERE -->
